#!/bin/sh

# Build zipfiles for PICMAN on Win32: separate runtime and developer
# packages.

ZIP=/tmp/picman-@PICMAN_VERSION@.zip
DEVZIP=/tmp/picman-dev-@PICMAN_VERSION@.zip

cd @prefix@

rm $ZIP
zip -r $ZIP -@ <<EOF
etc/picman/@PICMAN_SYSCONF_VERSION@
bin/picman-@PICMAN_APP_VERSION@.exe
bin/libpicman-@PICMAN_API_VERSION@-@LT_CURRENT_MINUS_AGE@.dll
bin/libpicmanbase-@PICMAN_API_VERSION@-@LT_CURRENT_MINUS_AGE@.dll
bin/libpicmancolor-@PICMAN_API_VERSION@-@LT_CURRENT_MINUS_AGE@.dll
bin/libpicmanconfig-@PICMAN_API_VERSION@-@LT_CURRENT_MINUS_AGE@.dll
bin/libpicmanmath-@PICMAN_API_VERSION@-@LT_CURRENT_MINUS_AGE@.dll
bin/libpicmanmodule-@PICMAN_API_VERSION@-@LT_CURRENT_MINUS_AGE@.dll
bin/libpicmanthumb-@PICMAN_API_VERSION@-@LT_CURRENT_MINUS_AGE@.dll
bin/libpicmanui-@PICMAN_API_VERSION@-@LT_CURRENT_MINUS_AGE@.dll
bin/libpicmanwidgets-@PICMAN_API_VERSION@-@LT_CURRENT_MINUS_AGE@.dll
lib/picman/@PICMAN_PLUGIN_VERSION@/environ
lib/picman/@PICMAN_PLUGIN_VERSION@/plug-ins
share/picman/@PICMAN_DATA_VERSION@
man/man1/picman-@PICMAN_APP_VERSION@.1
man/man5/picmanrc-@PICMAN_APP_VERSION@.5
EOF

zip $ZIP lib/picman/@PICMAN_PLUGIN_VERSION@/modules/*.dll
zip $ZIP lib/locale/*/LC_MESSAGES/picman20*.mo

rm $DEVZIP
zip -r $DEVZIP -@ <<EOF
bin/picmantool-@PICMAN_TOOL_VERSION@.exe
lib/libpicman-@PICMAN_API_VERSION@.dll.a
lib/picman-@PICMAN_API_VERSION@.lib
lib/picman.def
lib/libpicmanbase-@PICMAN_API_VERSION@.dll.a
lib/picmanbase-@PICMAN_API_VERSION@.lib
lib/picmanbase.def
lib/libpicmancolor-@PICMAN_API_VERSION@.dll.a
lib/picmancolor-@PICMAN_API_VERSION@.lib
lib/picmancolor.def
lib/libpicmanconfig-@PICMAN_API_VERSION@.dll.a
lib/picmanconfig-@PICMAN_API_VERSION@.lib
lib/picmanconfig.def
lib/libpicmanmath-@PICMAN_API_VERSION@.dll.a
lib/picmanmath-@PICMAN_API_VERSION@.lib
lib/picmanmath.def
lib/libpicmanmodule-@PICMAN_API_VERSION@.dll.a
lib/picmanmodule-@PICMAN_API_VERSION@.lib
lib/picmanmodule.def
lib/picmanthumb-@PICMAN_API_VERSION@.lib
lib/picmanthumb.def
lib/libpicmanui-@PICMAN_API_VERSION@.dll.a
lib/picmanui-@PICMAN_API_VERSION@.lib
lib/picmanui.def
lib/libpicmanwidgets-@PICMAN_API_VERSION@.dll.a
lib/picmanwidgets-@PICMAN_API_VERSION@.lib
lib/picmanwidgets.def
include/picman-@PICMAN_API_VERSION@
man/man1/picmantool-@PICMAN_TOOL_VERSION@.1
EOF

zip $DEVZIP lib/pkgconfig/picman*.pc
